<div class="with-margin-top">
  <nav-back [buttonConfig]="buttonConfig"></nav-back>

  @if (error) {
    <div class="warning"><b>{{ 'messages.error' | translate }}:</b> {{error}}</div>
  }
  @if (!error) {
    <form #form="ngForm" class="form-control">
      <mat-card class="with-margin-top">
        <mat-card-content>
          @if (data.id !== undefined) {
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>ID</mat-label>
              <input disabled="true" name="id" matInput value="{{data.id}}">
            </mat-form-field>
          }
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{ 'tables.name' | translate }}</mat-label>
            <input matInput name="name" required [(ngModel)]="data.name">
          </mat-form-field>
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{ 'tables.description' | translate }}</mat-label>
            <input matInput name="description" required [(ngModel)]="data.description">
          </mat-form-field>
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{ 'tables.status' | translate }}</mat-label>
            <mat-select [(ngModel)]="data.status" name="status" required>
              <mat-option [value]="'ACTIVE'">ACTIVE</mat-option>
              <mat-option [value]="'DISABLED'">DISABLED</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>{{ 'tables.value' | translate }}</mat-label>
            <input matInput [(ngModel)]="data.value" name="value" required>
          </mat-form-field>
          @if (data.id !== undefined) {
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>{{ 'tables.creationDate' | translate }}</mat-label>
              <input disabled="true" matInput value="{{data.creationDate | momentPipe:'yyyy.MM.DD. HH:mm:ss'}}">
            </mat-form-field>
          }
          <button [disabled]="form.status ==='INVALID'" mat-button color="primary" (click)="save()">{{ 'buttons.save' | translate }}</button>
          <button mat-button (click)="generateRandomValue()">{{ 'apikey.generateRandom' | translate }}</button>
        </mat-card-content>
      </mat-card>
    </form>
  }
</div>